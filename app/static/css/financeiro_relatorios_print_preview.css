/* Somente “margem de página” para o preview */
body{
    margin:0;
    background:#0b1220;
    padding:20px;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.page{
    max-width: 980px;
    margin: 0 auto;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 22px 60px rgba(0,0,0,.35);
}

/* ==========================
    FIXES do PREVIEW (isolado)
    ========================== */

/* 1) O cabeçalho existe, mas a .fr-print__brand está sendo ocultada por algum CSS.
        Força ela a aparecer no preview. */
.fr-print__head{ display:flex; }
.fr-print__brand{
    display:flex;
    visibility: visible;
    opacity: 1;
}

/* 2) Gráficos sumindo: o CSS do print normalmente esconde IMG e usa CANVAS no modal.
        No preview só temos IMG, então forçamos o IMG a aparecer. */
.fr-print__chartwrap img,
#frPrintChartImg{
    display:block;
    visibility: visible;
    opacity: 1;
    width:100%;
    height:100%;
    max-height:320px;   /* limita doughnut no preview */
    object-fit:contain;
}

.fr-print__chart {
    padding: 14px 16px 0 16px;
}

/* 3) Espaço correto entre o título da seção e o grid */
.fr-print__sectiontitle{ margin-bottom: 10px; }

/* ===============================
   PRINT: remover "aspecto de foto" (wrapper de preview)
   =============================== */
@media print{

  /* página branca, sem padding externo */
  html, body{
    background: #fff !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* remove o wrapper que cria "cartão" */
  .page{
    max-width: none !important;
    margin: 0 !important;
    border-radius: 0 !important;
    overflow: visible !important;
    box-shadow: none !important;
  }

  /* garante que o relatório ocupe a largura total */
  .fr-print{
    width: 100% !important;
    max-width: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
}

/* (Opcional) controla margem física da folha */
@page{
  margin: 12mm; /* ajuste se quiser mais/menos borda */
}

/* Barra superior do Preview (somente tela) */
.fr-prevbar{
  position: sticky;
  top: 0;
  z-index: 50;
  padding: 12px 14px;
  margin: 0 auto 14px auto;
  max-width: 980px;

  border: 1px solid var(--fin-border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--fin-panel-bg) 92%, #000);

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
}

.fr-prevbar__title{
  font-weight: 1000;
  color: var(--fin-text);
  font-size: 12px;
  line-height: 1.2;
}

.fr-prevbar__hint{
  margin-top: 4px;
  color: var(--fin-muted);
  font-weight: 800;
  font-size: 11px;
  line-height: 1.2;
}

.fr-prevbar__actions{
  display:flex;
  gap: 10px;
  align-items:center;
  flex: 0 0 auto;
}

@media (max-width: 720px){
  .fr-prevbar{
    flex-direction: column;
    align-items: stretch;
  }
  .fr-prevbar__actions{
    justify-content: stretch;
  }
  .fr-prevbar__actions .fin-btn{
    width: 100%;
    justify-content: center;
  }
}

/* No print: remove a barra do preview */
@media print{
  .fr-prevbar{ display:none !important; }
}